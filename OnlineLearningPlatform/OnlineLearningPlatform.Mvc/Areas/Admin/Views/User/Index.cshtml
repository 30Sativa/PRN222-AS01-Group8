@using OnlineLearningPlatform.Mvc.Models.Admin
@model List<UserViewModel>

@{
    ViewData["Title"] = "User Management";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";

}

@section Styles {
    <link rel="stylesheet" href="~/css/Admin/user.css" />
}

<div class="user-container">

    <!-- HEADER -->
    <div class="page-header">
        <h2 class="page-title">User Management</h2>

        <a asp-area="Admin"
           asp-controller="User"
           asp-action="Create"
           class="btn btn-primary">
            + Create User
        </a>
    </div>


    <!-- TABLE -->
    <table class="user-table">

        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Role</th>
                <th>Status</th>
                <th style="width:320px;">Actions</th>
            </tr>
        </thead>

        <tbody>
            @foreach (var u in Model)
            {
                <tr>
                    <td>@u.FullName</td>
                    <td>@u.Email</td>

                    <!-- ROLE BADGE -->
                    <td>
                        <span class="badge badge-role">
                            @u.Role
                        </span>
                    </td>

                    <!-- STATUS -->
                    <td>
                        @if (u.IsLocked)
                        {
                            <span class="badge badge-locked">Locked</span>
                        }
                        else
                        {
                            <span class="badge badge-active">Active</span>
                        }
                    </td>

                    <!-- ACTIONS -->
                    <td class="actions">

                        <!-- EDIT INFO -->
                        <a asp-area="Admin"
                           asp-controller="User"
                           asp-action="Edit"
                           asp-route-id="@u.Id"
                           class="btn btn-edit">
                            Edit
                        </a>

                        <!-- CHANGE ROLE -->
                        <a asp-area="Admin"
                           asp-controller="User"
                           asp-action="EditRole"
                           asp-route-id="@u.Id"
                           class="btn btn-role">
                            Role
                        </a>

                        <!-- LOCK / UNLOCK -->
                        @if (u.IsLocked)
                        {
                            <a asp-area="Admin"
                               asp-controller="User"
                               asp-action="Unlock"
                               asp-route-id="@u.Id"
                               class="btn btn-unlock">
                                Unlock
                            </a>
                        }
                        else
                        {
                            <a asp-area="Admin"
                               asp-controller="User"
                               asp-action="Lock"
                               asp-route-id="@u.Id"
                               class="btn btn-lock">
                                Lock
                            </a>
                        }

                    </td>
                </tr>
            }
        </tbody>

    </table>

</div>
